//1ã€å¤©ä¹¦ç‰ˆ6.0é‡æ„ç‰ˆï¼Œæ”¯æŒS5å…¨å±€åä»£ï¼Œå…¨å±€åä»£å¤–éƒ¨ç¯å¢ƒå˜é‡åã€SOCKS5GLOBALã€‘ï¼Œtrueå’Œfalse
//2ã€æ”¯æŒåä»£å¼€å…³ï¼Œç§é’¥å¼€å…³ï¼Œå…¨å±€åˆ†æ®µå¼€å…³ï¼Œè®¢é˜…éšè—å¼€å…³åŠŸèƒ½ï¼Œå»é™¤UUIDé™åˆ¶ï¼Œclashç§é’¥é˜²æ­¢è¢«è–…è¯·æ±‚æ•°
//3ã€åˆå†é‡æ–°ä¿®æ”¹äº†æ¥å£å…³é—­é€»è¾‘ï¼Œé™ä½è¯·æ±‚æ•°ï¼ˆè¯·æ±‚æ•°å¤§å¹…åº¦é™ä½ï¼‰å’Œé”™è¯¯ç‡ï¼ˆworkerå¼•å‘å¼‚å¸¸ä¸º0ï¼Œè‡³å°‘æˆ‘æµ‹è¯•çš„æ˜¯ï¼‰
//4ã€ä¿®æ”¹ä¼ è¾“æ–¹å¼ï¼Œå¢åŠ åˆ†ç‰‡ä¼ è¾“ï¼Œå¯æå‡ä¼ è¾“ç¨³å®šæ€§
//5ã€æ”¯æŒSOCKS5ï¼Œæ”¯æŒå¤–éƒ¨ç¯å¢ƒå˜é‡ï¼Œå˜é‡åã€SOCKS5ã€‘ï¼Œåªæ”¯æŒä¸€ä¸ªSOCKS5ï¼Œå¹¶ä¸”SOCKS5å’ŒåŸå§‹åä»£åªèƒ½äºŒé€‰ä¸€ï¼Œå»ºè®®æœ‰ç¨³å®šSOCKS5çš„äººä½¿ç”¨ï¼Œç™½å«–ç©å®¶ä¸å»ºè®®ä½¿ç”¨ï¼Œä¸ºäº†æ–¹ä¾¿åˆ‡æ¢å¢åŠ äº†ä¸€ä¸ªå¤–éƒ¨å˜é‡ã€SOCKS5OPENã€‘ï¼Œtrueæ‰“å¼€å’Œfalseå…³é—­
//6ã€ä¸ç”¨åœ¨æ„é‚£äº›å¥‡æ€ªçš„å˜é‡åï¼Œæ ¹æ®åé¢æ³¨é‡Šçš„å¤‡æ³¨å»æ”¹ï¼Œå¤§æ¦‚ä¹Ÿå°±å‰50è¡Œçœ‹ä¸€ä¸‹å¤‡æ³¨å°±è¡Œï¼Œclashé…ç½®åœ¨åº•éƒ¨ï¼Œæ‡‚çš„å¯ä»¥æ ¹æ®è‡ªèº«éœ€æ±‚ä¿®æ”¹
//7ã€çº¯æ‰‹æ“é…ç½®ï¼Œå»é™¤ä»»ä½•APIå¤–é“¾ï¼Œç›´æ¥æ”¹å¥½äº†éƒ¨ç½²å°±è¡Œï¼Œè¿™æ ·å®‰å…¨æ€§å²æ— å‰ä¾‹
//8ã€é€šç”¨è®¢é˜…ä¸æ”¯æŒç§é’¥åŠŸèƒ½ï¼Œä½¿ç”¨é€šç”¨è®¢é˜…éœ€å…³é—­ç§é’¥åŠŸèƒ½å†è®¢é˜…èŠ‚ç‚¹ï¼ŒCFä¸æ”¯æŒè‡ªèº«1.1.1.1çš„DNSè§£æï¼Œå¦‚æœæ— æ³•è¿é€šå¯ä»¥æ£€æŸ¥å®¢æˆ·ç«¯DNSè®¾ç½®
//9ã€ç”±äºæœ¬äººä»…ä½¿ç”¨openclashå’Œclash metaï¼Œå…¶ä»–å¹³å°è½¯ä»¶å‡æœªæµ‹è¯•ï¼Œè¯·è‡ªè¡Œæµ‹è¯•ç ”ç©¶ï¼Œè¦æ˜¯ä¸èƒ½ç”¨å°±ç®—äº†ï¼Œä¸è´Ÿè´£æ”¹è¿›ï¼Œç»§ç»­æ¦‚ä¸è´Ÿè´£^_^
//10ã€ç”±äºæœ¬äººçº¯èœï¼Œå¾ˆå¤šä»£ç è§£é‡Šéƒ½æ˜¯æ ¹æ®è‡ªå·±çš„ç†è§£çç¼–çš„ï¼Œä¸“ä¸šçš„æ— è§†å°±å¥½ï¼Œå•çº¯ä¸ºäº†å¸®åŠ©å°ç™½ç†è§£ä»£ç å¤§è‡´åŸç†^_^

import { connect } from 'cloudflare:sockets';

let å“å‘€å‘€è¿™æ˜¯æˆ‘çš„IDå•Š = "tianshu"; //å®é™…ä¸Šè¿™æ˜¯ä½ çš„è®¢é˜…è·¯å¾„ï¼Œæ”¯æŒä»»æ„å¤§å°å†™å­—æ¯å’Œæ•°å­—ï¼Œ[åŸŸå/ID]è¿›å…¥è®¢é˜…é¡µé¢
let å“å‘€å‘€è¿™æ˜¯æˆ‘çš„VLå¯†é’¥ = "7688f3cb-96d7-481e-992b-4d106c7b6d71"; //è¿™æ˜¯çœŸå®çš„UUIDï¼Œé€šç”¨è®¢é˜…ä¼šè¿›è¡ŒéªŒè¯ï¼Œå»ºè®®ä¿®æ”¹ä¸ºè‡ªå·±çš„è§„èŒƒåŒ–UUID

let ç§é’¥å¼€å…³ = false //æ˜¯å¦å¯ç”¨ç§é’¥åŠŸèƒ½ï¼Œtrueå¯ç”¨ï¼Œfalseä¸å¯ç”¨ï¼Œå› ä¸ºç§é’¥åŠŸèƒ½åªæ”¯æŒclashï¼Œå¦‚æœæ‰“ç®—ä½¿ç”¨é€šç”¨è®¢é˜…åˆ™éœ€å…³é—­ç§é’¥åŠŸèƒ½
let å’¦è¿™æ˜¯æˆ‘çš„ç§é’¥å“ = ""; //è¿™æ˜¯ä½ çš„ç§é’¥ï¼Œæé«˜éšç§˜æ€§å®‰å…¨æ€§ï¼Œå°±ç®—åˆ«äººæ‰«åˆ°ä½ çš„åŸŸåä¹Ÿæ— æ³•é“¾æ¥ï¼Œå†ä¹Ÿä¸æ€•åˆ«äººè–…è¯·æ±‚æ•°äº†^_^

let éšè—è®¢é˜… = false //é€‰æ‹©æ˜¯å¦éšè—è®¢é˜…é¡µé¢ï¼Œfalseä¸éšè—ï¼Œtrueéšè—ï¼Œå½“ç„¶éšè—åè‡ªå·±ä¹Ÿæ— æ³•è®¢é˜…ï¼Œå› ä¸ºé…ç½®å›ºå®šï¼Œé€‚åˆè‡ªå·±è®¢é˜…åå°±éšè—ï¼Œé˜²æ­¢è¢«çˆ¬è®¢é˜…ï¼Œå¹¶ä¸”å¯ä»¥åˆ°ä¸‹æ–¹æ·»åŠ å˜²è®½è¯­^_^
let å˜²è®½è¯­ = "å“å‘€ä½ æ‰¾åˆ°äº†æˆ‘ï¼Œä½†æ˜¯æˆ‘å°±æ˜¯ä¸ç»™ä½ çœ‹ï¼Œæ°”ä¸æ°”ï¼Œå˜¿å˜¿å˜¿" //éšè—è®¢é˜…åï¼ŒçœŸå®çš„è®¢é˜…é¡µé¢å°±ä¼šæ˜¾ç¤ºè¿™æ®µè¯ï¼Œæƒ³å†™å•¥å†™å•¥

let æˆ‘çš„ä¼˜é€‰ = 'www.visa.com#visaå›½é™…
www.visa.com.tt#visaç‰¹ç«‹å°¼è¾¾&å¤šå·´å“¥
www.visa.com.ar#visaé˜¿æ ¹å»·
www.visaeurope.at#visaå¥¥åœ°åˆ©
www.visa.com.az#visaé˜¿å¡æ‹œç–†
www.visa.be#visaæ¯”åˆ©æ—¶
www.visa.com.bz#visaä¼¯åˆ©å…¹
www.visa.com.bo#visaç»åˆ©ç»´äºš
www.visa.com.br#visaå·´è¥¿
www.visa.com.kh#visaæŸ¬åŸ”å¯¨
www.visa.com.co#visaå“¥ä¼¦æ¯”äºš
www.visa.com.hr#visaå…‹ç½—åœ°äºš
www.visa.com.cy#visaå¡æµ¦è·¯æ–¯
www.visa.com.do#visaå¤šæ˜å°¼åŠ å…±å’Œå›½
www.visa.com.ec#visaå„ç“œå¤šå°”
cf.090227.xyz#ä¸‰ç½‘è‡ªé€‚åº”åˆ†æµå®˜æ–¹ä¼˜é€‰
ct.090227.xyz#ç”µä¿¡å®˜æ–¹ä¼˜é€‰
cmcc.090227.xyz#ç§»åŠ¨å®˜æ–¹' //CFçš„èŠ‚ç‚¹ï¼Œå¡«åŸŸåæˆ–IPï¼Œå¥½çš„ä¼˜é€‰ä¸€ä¸ªå°±å¤Ÿäº†ï¼Œç”±äºCFcdnå¸¸è§„13ç«¯å£å¼€æ”¾ï¼Œå¯ä»¥ç”Ÿæˆå…¨ç«¯å£èŠ‚ç‚¹ï¼Œå¦‚æœç•™ç©ºåˆ™ä¼šä½¿ç”¨ä½ è‡ªå®šä¹‰åŸŸçš„å°é»„äº‘ä»£ç†
let æˆ‘çš„ä¼˜é€‰IPV6 = '' //CFçš„IPV6èŠ‚ç‚¹ï¼Œå¡«åŸŸåæˆ–IPï¼Œå¥½çš„ä¼˜é€‰ä¸€ä¸ªå°±å¤Ÿäº†ï¼Œç”±äºCFcdnå¸¸è§„13ç«¯å£å¼€æ”¾ï¼Œå¯ä»¥ç”Ÿæˆå…¨ç«¯å£èŠ‚ç‚¹ï¼Œå¦‚æœç•™ç©ºåˆ™ä¼šä½¿ç”¨ä½ è‡ªå®šä¹‰åŸŸçš„å°é»„äº‘ä»£ç†

let ç‰¹æ®Šä¼˜é€‰ = 'ProxyIP.SG.fxxk.dedyn.io' //éCFçš„èŠ‚ç‚¹ï¼Œå¡«åŸŸåæˆ–IPï¼Œç»“åˆä½ çš„åä»£ä¸€èµ·ä½¿ç”¨çš„è¯ï¼Œè¿™ä¸ªèŠ‚ç‚¹å¯ä»¥å®Œå…¨çš„å›ºå®šè½åœ°åœ°åŒºï¼Œä¾‹å¦‚åŒæ—¶éƒ½ä½¿ç”¨ç¾å›½çš„
let ç‰¹æ®Šä¼˜é€‰çš„ç«¯å£ = '443' //éCFçš„èŠ‚ç‚¹ç«¯å£
let éCFèŠ‚ç‚¹æ˜¯å¦æ‰“å¼€tls = 'true' //éCFçš„èŠ‚ç‚¹TLSå¼€å…³ï¼Œtrueï¼Œfalseï¼Œé€šç”¨è®¢é˜…æ­¤åŠŸèƒ½æ— æ•ˆï¼Œé»˜è®¤ä½¿ç”¨tls
let ç‰¹æ®Šä¼˜é€‰çš„host = '' //æ–¹ä¾¿ç»™å»ºäº†å…¨å±€S5åä»£çš„åŒå­¦ï¼Œä¸ç”¨çš„ç•™ç©ºå°±è¡Œ

let å¯ç”¨åä»£åŠŸèƒ½ = true //é€‰æ‹©æ˜¯å¦å¯ç”¨åä»£åŠŸèƒ½ï¼Œfalseï¼Œtrueï¼Œç°åœ¨ä½ å¯ä»¥è‡ªç”±çš„é€‰æ‹©æ˜¯å¦å¯ç”¨åä»£åŠŸèƒ½äº†
let åä»£IP = 'ts.hpc.tw' //åä»£IPæˆ–åŸŸåï¼Œåä»£IPç«¯å£ä¸€èˆ¬æƒ…å†µä¸‹ä¸ç”¨å¡«å†™ï¼Œå¦‚æœä½ éè¦ç”¨éæ ‡åä»£çš„è¯ï¼Œå¯ä»¥å¡«'ts.hpc.tw:443'è¿™æ ·

let å¯ç”¨SOCKS5åä»£ = false //å¦‚æœå¯ç”¨æ­¤åŠŸèƒ½ï¼ŒåŸå§‹åä»£å°†å¤±æ•ˆ
let å¯ç”¨SOCKS5å…¨å±€åä»£ = false //é€‰æ‹©æ˜¯å¦å¯ç”¨SOCKS5å…¨å±€åä»£ï¼Œå¯ç”¨åæ‰€æœ‰è®¿é—®éƒ½æ˜¯S5çš„è½åœ°ã€æ— è®ºä½ å®¢æˆ·ç«¯é€‰ä»€ä¹ˆèŠ‚ç‚¹ã€‘ï¼Œè®¿é—®è·¯å¾„æ˜¯å®¢æˆ·ç«¯--CF--SOCKS5ï¼Œå½“ç„¶å¯ç”¨æ­¤åŠŸèƒ½åå»¶è¿Ÿ=CF+SOCKS5ï¼Œå¸¦å®½å–å†³äºSOCKS5çš„å¸¦å®½ï¼Œä¸å†äº«å—CFé«˜é€Ÿå’Œéšæ—¶æ»¡å¸¦å®½çš„å¾…é‡
let æˆ‘çš„SOCKS5è´¦å· = '' //æ ¼å¼'è´¦å·:å¯†ç @åœ°å€:ç«¯å£'

let æˆ‘çš„èŠ‚ç‚¹åå­— = 'å¤©ä¹¦6.0é‡æ„ç‰ˆ' //è‡ªå·±çš„èŠ‚ç‚¹åå­—

let ä¼ªè£…ç½‘é¡µ = '' //å¡«å…¥ä¼ªè£…ç½‘é¡µï¼Œæ ¼å¼'www.youku.com'ï¼Œå¦‚æœä¸å¡«ï¼Œè„šæœ¬æœ¬èº«æœ‰ä¸ªå†…ç½®çš„ç®€å•ä»£ç†é¡µé¢ï¼Œå»ºè®®ç”¨å°ç«™ä¼ªè£…æˆ–è€…ç›´æ¥å†…ç½®ï¼Œæ¯”è¾ƒé è°±

let å¯ç”¨å…¨å±€åˆ†æ®µ = true //é€‰æ‹©æ˜¯å¦ä½¿ç”¨å…¨å±€åˆ†æ®µåŠŸèƒ½ï¼Œè¯•éªŒåŠŸèƒ½ï¼Œåˆ†æ®µä¼ è¾“å¯ä»¥é™ä½workerå‹åŠ›ï¼Œæå‡ä¼ è¾“ç¨³å®šæ€§ï¼ŒåŒæ—¶ä¹ŸåŠ å¿«å“åº”é€Ÿåº¦ï¼Œä½†æ˜¯ç”±äºSOCKS5è·Ÿå…¨å±€åˆ†æ®µåŠŸèƒ½å¯èƒ½æœ‰å†²çªï¼Œå¦‚æœä½¿ç”¨SOCKS5æ— æ³•åä»£çš„è¯å¯ä»¥å°è¯•å…³é—­åˆ†æ®µåŠŸèƒ½
let åˆ†æ®µå¤§å° = 4*1024; //åˆ†æ®µå¤§å°ï¼Œå»ºè®®ä¸è¦éšæ„ä¿®æ”¹ï¼Œè¿™æ˜¯æµ‹è¯•çš„æ¯”è¾ƒé€‚åˆçš„æ•°å€¼ï¼Œå»ºè®®çš„æ•°å€¼ä¸º1-4K
let é™é€Ÿç­‰çº§ = 0; //é™é€Ÿç­‰çº§ï¼Œä¸»åŠ¨é™åˆ¶é€Ÿåº¦ä»¥è¾¾åˆ°ç¨³å®šæ€§éœ€æ±‚ã€ä¾‹å¦‚ç›´æ’­ï¼Œå‹‰å¼ºå¯ä»¥720Pã€‘ï¼Œæ•°å€¼è¶Šå¤§è¶Šæ…¢ï¼Œ0ä¸ºä¸é™é€Ÿï¼Œè‡ªè¡Œæ ¹æ®åˆ†æ®µå¤§å°åŠ¨æ€è°ƒæ•´ã€ä¸ªäººè°ƒè¯•çš„æ•°å€¼ä¸ºåˆ†æ®µå¤§å° = 4*1024ï¼Œé™é€Ÿç­‰çº§ = 5ã€‘
//////////////////////////////////////////////////////////////////////////ç½‘é¡µå…¥å£////////////////////////////////////////////////////////////////////////
export default {
  async fetch(è®¿é—®è¯·æ±‚, env) {
      const è¯»å–æˆ‘çš„è¯·æ±‚æ ‡å¤´ = è®¿é—®è¯·æ±‚.headers.get('Upgrade');
      const url = new URL(è®¿é—®è¯·æ±‚.url);
      if (!è¯»å–æˆ‘çš„è¯·æ±‚æ ‡å¤´ || è¯»å–æˆ‘çš„è¯·æ±‚æ ‡å¤´ !== 'websocket') {
          switch (url.pathname) {
              case `/${å“å‘€å‘€è¿™æ˜¯æˆ‘çš„IDå•Š}`: {
                  const è®¢é˜…é¡µé¢ = ç»™æˆ‘è®¢é˜…é¡µé¢(å“å‘€å‘€è¿™æ˜¯æˆ‘çš„IDå•Š, è®¿é—®è¯·æ±‚.headers.get('Host'));
                  return new Response(`${è®¢é˜…é¡µé¢}`, {
                      status: 200,
                      headers: {
                          "Content-Type": "text/plain;charset=utf-8",
                      }
                  });
              }
              case `/${å“å‘€å‘€è¿™æ˜¯æˆ‘çš„IDå•Š}/${è½¬ç }${è½¬ç 2}`: {
                  if (éšè—è®¢é˜…) {
                  return new Response (`${å˜²è®½è¯­}`, {
                  status: 200,
                  headers: {
                      "Content-Type": "text/plain;charset=utf-8",
                      }
                  });
                  } else {
                  const é€šç”¨é…ç½®æ–‡ä»¶ = ç»™æˆ‘é€šç”¨é…ç½®æ–‡ä»¶(è®¿é—®è¯·æ±‚.headers.get('Host'));
                  return new Response(`${é€šç”¨é…ç½®æ–‡ä»¶}`, {
                      status: 200,
                      headers: {
                          "Content-Type": "text/plain;charset=utf-8",
                      }
                  });
                }
              }
              case `/${å“å‘€å‘€è¿™æ˜¯æˆ‘çš„IDå•Š}/${å°çŒ«}${å’ª}`: {
                  if (éšè—è®¢é˜…) {
                  return new Response (`${å˜²è®½è¯­}`, {
                  status: 200,
                  headers: {
                      "Content-Type": "text/plain;charset=utf-8",
                      }
                  });
                  } else {
                  const å°çŒ«å’ªé…ç½®æ–‡ä»¶ = ç»™æˆ‘å°çŒ«å’ªé…ç½®æ–‡ä»¶(è®¿é—®è¯·æ±‚.headers.get('Host'));
                  return new Response(`${å°çŒ«å’ªé…ç½®æ–‡ä»¶}`, {
                      status: 200,
                      headers: {
                          "Content-Type": "text/plain;charset=utf-8",
                      }
                  });
                }
              }
              default:
              if (ä¼ªè£…ç½‘é¡µ) {
                  url.hostname = ä¼ªè£…ç½‘é¡µ;
                  url.protocol = 'https:';
                  è®¿é—®è¯·æ±‚ = new Request(url, è®¿é—®è¯·æ±‚);
                  return fetch(è®¿é—®è¯·æ±‚);
              } else {
                  è®¿é—®è¯·æ±‚ = new Request(url, è®¿é—®è¯·æ±‚);
                  return ä»£ç†é¡µé¢(è®¿é—®è¯·æ±‚);
              }
          }
      } else if (è¯»å–æˆ‘çš„è¯·æ±‚æ ‡å¤´ === 'websocket'){
          æˆ‘çš„ä¼˜é€‰ = env.IPV4 || æˆ‘çš„ä¼˜é€‰;
          æˆ‘çš„ä¼˜é€‰IPV6 = env.IPV6 || æˆ‘çš„ä¼˜é€‰IPV6;
          åä»£IP = env.PROXYIP || åä»£IP;
          æˆ‘çš„SOCKS5è´¦å· = env.SOCKS5 || æˆ‘çš„SOCKS5è´¦å·;
          å¯ç”¨SOCKS5åä»£ = (env.SOCKS5OPEN === 'true') ? true : (env.SOCKS5OPEN === 'false' ? false : å¯ç”¨SOCKS5åä»£);
          å¯ç”¨SOCKS5å…¨å±€åä»£ = (env.SOCKS5GLOBAL === 'true') ? true : (env.SOCKS5GLOBAL === 'false' ? false : å¯ç”¨SOCKS5å…¨å±€åä»£);
          if (ç§é’¥å¼€å…³) {
          const éªŒè¯æˆ‘çš„ç§é’¥ = è®¿é—®è¯·æ±‚.headers.get('my-key')
          if (éªŒè¯æˆ‘çš„ç§é’¥ === å’¦è¿™æ˜¯æˆ‘çš„ç§é’¥å“) {
          return await å‡çº§WSè¯·æ±‚(è®¿é—®è¯·æ±‚);
          }
          }
          if (!ç§é’¥å¼€å…³) {
          return await å‡çº§WSè¯·æ±‚(è®¿é—®è¯·æ±‚);
          }
      }
  }
};
////////////////////////////////////////////////////////////////////////å†…ç½®ä»£ç†é¡µé¢//////////////////////////////////////////////////////////////////////
async function ä»£ç†é¡µé¢(request) {
  const url = new URL(request.url);
  if (url.pathname === '/' || url.pathname === '/proxy/') {
    return createLandingPage();
  }
  let actualUrlStr = url.pathname.replace("/proxy/", "") + url.search + url.hash;
  if (!actualUrlStr.startsWith('http://') && !actualUrlStr.startsWith('https://')) {
    actualUrlStr = 'https://' + actualUrlStr;
  }
  try {
    const actualUrl = new URL(actualUrlStr);
    const modifiedRequest = new Request(actualUrl, {
      headers: request.headers,
      method: request.method,
      body: (request.method === 'POST' || request.method === 'PUT') ? request.body : undefined,
      redirect: 'follow'
    });
    const response = await fetch(modifiedRequest);
    if (!response.ok) {
      throw new Error(`Fetch request failed with status: ${response.status}`);
    }
    const clonedResponseBody = await response.clone().text();
    const modifiedResponse = new Response(clonedResponseBody, response);
    modifiedResponse.headers.set('Access-Control-Allow-Origin', '*');
    modifiedResponse.headers.set('Access-Control-Allow-Methods', 'GET, POST, PUT, DELETE');
    modifiedResponse.headers.set('Access-Control-Allow-Headers', 'Content-Type, Authorization');
    return modifiedResponse;
  } catch (error) {
    return new Response(`Error: ${error.message}`, { status: 500 });
  }
  
}
function createLandingPage() {
  const html = `
  <!DOCTYPE html>
  <html lang="en">
  <head>
  <style>
  body {
    background-color: #fbfbfb;
    font-family: Arial, sans-serif;
  }
  h1 {
    text-align: center;
    color: #444;
  }
  .container {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    height: 100vh;
  }
  form {
    background-color: white;
    box-shadow: 0 3px 6px rgba(0, 0, 0, 0.16), 0 3px 6px rgba(0, 0, 0, 0.23);
    padding: 2rem;
    border-radius: 8px;
  }
  input {
    display: block;
    width: 100%;
    font-size: 18px;
    padding: 15px;
    border: solid 1px #ccc;
    border-radius: 4px;
    margin: 1rem 0;
  }
  button {
    padding: 15px;
    background-color: #0288d1;
    color: white;
    font-size: 18px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    width: 100%;
  }
  button:hover {
    background-color: #039BE5;
  }
</style>
    <meta charset="UTF-8">
    <title>é€é¥å›çš„ä»£ç†æœåŠ¡å™¨</title>
  </head>
  <body>
    <h1>è¾“å…¥æ‚¨æƒ³è®¿é—®çš„ç½‘å€ï¼Œæœ¬ç½‘é¡µä¸»è¦æ–¹ä¾¿æ‹‰åº“ç”¨ï¼Œå¹¶ä¸èƒ½ç§‘å­¦</h1>
    <form id="proxy-form">
      <input type="text" id="url" name="url" placeholder="https://ç¤ºä¾‹.com" required />
      <button type="submit">è®¿é—®</button>
    </form>
    <script>
      const form = document.getElementById('proxy-form');
      form.addEventListener('submit', event => {
        event.preventDefault();
        const input = document.getElementById('url');
        const actualUrl = input.value;
        const proxyUrl = '/proxy/' + actualUrl;
        location.href = proxyUrl;
      });
    </script>
  </body>
  </html>
  `;
  return new Response(html, {
    headers: { 'Content-Type': 'text/html' }
  });
}
////////////////////////////////////////////////////////////////////////è„šæœ¬ä¸»è¦æ¶æ„//////////////////////////////////////////////////////////////////////
//ç¬¬ä¸€æ­¥ï¼Œè¯»å–å’Œæ„å»ºåŸºç¡€è®¿é—®ç»“æ„
async function å‡çº§WSè¯·æ±‚(è®¿é—®è¯·æ±‚) {
  const åˆ›å»ºWSæ¥å£ = new WebSocketPair();
  const [å®¢æˆ·ç«¯, WSæ¥å£] = Object.values(åˆ›å»ºWSæ¥å£);
  WSæ¥å£.accept();
  const è¯»å–æˆ‘çš„åŠ å¯†è®¿é—®å†…å®¹æ•°æ®å¤´ = è®¿é—®è¯·æ±‚.headers.get('sec-websocket-protocol');
  const è§£å¯†æ•°æ® = ä½¿ç”¨64ä½åŠ è§£å¯†(è¯»å–æˆ‘çš„åŠ å¯†è®¿é—®å†…å®¹æ•°æ®å¤´); //è§£å¯†ç›®æ ‡è®¿é—®æ•°æ®ï¼Œä¼ é€’ç»™TCPæ¡æ‰‹è¿›ç¨‹
  const { TCPæ¥å£, å†™å…¥åˆå§‹æ•°æ® } = await è§£æVLæ ‡å¤´(è§£å¯†æ•°æ®); //è§£æVLæ•°æ®å¹¶è¿›è¡ŒTCPæ¡æ‰‹
  å»ºç«‹ä¼ è¾“ç®¡é“(WSæ¥å£, TCPæ¥å£, å†™å…¥åˆå§‹æ•°æ®);
  return new Response(null, { status: 101, webSocket: å®¢æˆ·ç«¯ });
}
function ä½¿ç”¨64ä½åŠ è§£å¯†(è¿˜åŸæ··æ·†å­—ç¬¦) {
  è¿˜åŸæ··æ·†å­—ç¬¦ = è¿˜åŸæ··æ·†å­—ç¬¦.replace(/-/g, '+').replace(/_/g, '/');
  const è§£å¯†æ•°æ® = atob(è¿˜åŸæ··æ·†å­—ç¬¦);
  const è§£å¯†_ä½ _ä¸ª_ä¸å’š_å’™_å’šå‘› = Uint8Array.from(è§£å¯†æ•°æ®, (c) => c.charCodeAt(0));
  return è§£å¯†_ä½ _ä¸ª_ä¸å’š_å’™_å’šå‘›.buffer;
}
//ç¬¬äºŒæ­¥ï¼Œè§£è¯»VLåè®®æ•°æ®ï¼Œåˆ›å»ºTCPæ¡æ‰‹
async function è§£æVLæ ‡å¤´(VLæ•°æ®) {
  const è·å–æ•°æ®å®šä½ = new Uint8Array(VLæ•°æ®.slice(17, 18))[0];
  const æå–ç«¯å£ç´¢å¼• = 18 + è·å–æ•°æ®å®šä½ + 1;
  const å»ºç«‹ç«¯å£ç¼“å­˜ = VLæ•°æ®.slice(æå–ç«¯å£ç´¢å¼•, æå–ç«¯å£ç´¢å¼• + 2);
  const è®¿é—®ç«¯å£ = new DataView(å»ºç«‹ç«¯å£ç¼“å­˜).getUint16(0);
  const æå–åœ°å€ç´¢å¼• = æå–ç«¯å£ç´¢å¼• + 2;
  const å»ºç«‹åœ°å€ç¼“å­˜ = new Uint8Array(VLæ•°æ®.slice(æå–åœ°å€ç´¢å¼•, æå–åœ°å€ç´¢å¼• + 1));
  const è¯†åˆ«åœ°å€ç±»å‹ = å»ºç«‹åœ°å€ç¼“å­˜[0];
  let åœ°å€é•¿åº¦ = 0;
  let è®¿é—®åœ°å€ = '';
  let åœ°å€ä¿¡æ¯ç´¢å¼• = æå–åœ°å€ç´¢å¼• + 1;
  switch (è¯†åˆ«åœ°å€ç±»å‹) {
    case 1:
      åœ°å€é•¿åº¦ = 4;
      è®¿é—®åœ°å€ = new Uint8Array( VLæ•°æ®.slice(åœ°å€ä¿¡æ¯ç´¢å¼•, åœ°å€ä¿¡æ¯ç´¢å¼• + åœ°å€é•¿åº¦) ).join('.');
      break;
    case 2:
      åœ°å€é•¿åº¦ = new Uint8Array( VLæ•°æ®.slice(åœ°å€ä¿¡æ¯ç´¢å¼•, åœ°å€ä¿¡æ¯ç´¢å¼• + 1) )[0];
      åœ°å€ä¿¡æ¯ç´¢å¼• += 1;
      è®¿é—®åœ°å€ = new TextDecoder().decode( VLæ•°æ®.slice(åœ°å€ä¿¡æ¯ç´¢å¼•, åœ°å€ä¿¡æ¯ç´¢å¼• + åœ°å€é•¿åº¦) );
      break;
    case 3:
      åœ°å€é•¿åº¦ = 16;
      const dataView = new DataView( VLæ•°æ®.slice(åœ°å€ä¿¡æ¯ç´¢å¼•, åœ°å€ä¿¡æ¯ç´¢å¼• + åœ°å€é•¿åº¦) );
      const ipv6 = [];
      for (let i = 0; i < 8; i++) { ipv6.push(dataView.getUint16(i * 2).toString(16)); }
      è®¿é—®åœ°å€ = ipv6.join(':');
      break;
  }
  let TCPæ¥å£
  let [åä»£IPåœ°å€, åä»£IPç«¯å£] = åä»£IP.split(':');
  const å†™å…¥åˆå§‹æ•°æ® = VLæ•°æ®.slice(åœ°å€ä¿¡æ¯ç´¢å¼• + åœ°å€é•¿åº¦);
  if (å¯ç”¨åä»£åŠŸèƒ½ && å¯ç”¨SOCKS5åä»£ && å¯ç”¨SOCKS5å…¨å±€åä»£) {
    TCPæ¥å£ = await åˆ›å»ºSOCKS5æ¥å£(è¯†åˆ«åœ°å€ç±»å‹, è®¿é—®åœ°å€, è®¿é—®ç«¯å£);
    return { TCPæ¥å£, å†™å…¥åˆå§‹æ•°æ® };
  } else {
    try {
    TCPæ¥å£ = connect({ hostname: è®¿é—®åœ°å€, port: è®¿é—®ç«¯å£ });
    await TCPæ¥å£.opened;
    } catch {
      if (å¯ç”¨åä»£åŠŸèƒ½) {
        if (å¯ç”¨SOCKS5åä»£) {
          TCPæ¥å£ = await åˆ›å»ºSOCKS5æ¥å£(è¯†åˆ«åœ°å€ç±»å‹, è®¿é—®åœ°å€, è®¿é—®ç«¯å£);
        } else {
          TCPæ¥å£ = connect({ hostname: åä»£IPåœ°å€, port: åä»£IPç«¯å£ || è®¿é—®ç«¯å£ });
        }
      }
    } finally {
      return { TCPæ¥å£, å†™å…¥åˆå§‹æ•°æ® };
    }
  }
}
//ç¬¬ä¸‰æ­¥ï¼Œåˆ›å»ºå®¢æˆ·ç«¯WS-CF-ç›®æ ‡çš„ä¼ è¾“é€šé“å¹¶ç›‘å¬çŠ¶æ€
async function å»ºç«‹ä¼ è¾“ç®¡é“(WSæ¥å£, TCPæ¥å£, å†™å…¥åˆå§‹æ•°æ®) {
  await WSæ¥å£.send(new Uint8Array([0, 0]).buffer);
  const æ•°æ®æµ = new ReadableStream({ //ç›‘å¬WSæ¥å£æ•°æ®å¹¶å‘é€ç»™æ•°æ®æµ
    async start(æ§åˆ¶å™¨) {
      if (å†™å…¥åˆå§‹æ•°æ®) { æ§åˆ¶å™¨.enqueue(å†™å…¥åˆå§‹æ•°æ®) };
      WSæ¥å£.addEventListener('message', (event) => { æ§åˆ¶å™¨.enqueue(event.data) }); //ç›‘å¬å®¢æˆ·ç«¯WSæ¥å£æ¶ˆæ¯ï¼Œæ¨é€ç»™æ•°æ®æµ
      WSæ¥å£.addEventListener('close', () => { æ§åˆ¶å™¨.close(); return; }); //ç›‘å¬å®¢æˆ·ç«¯WSæ¥å£å…³é—­ä¿¡æ¯ï¼Œç»“æŸæµä¼ è¾“
      WSæ¥å£.addEventListener('error', () => { æ§åˆ¶å™¨.close(); TCPæ¥å£.close(); WSæ¥å£.close(); return; }); //ç›‘å¬å®¢æˆ·ç«¯WSæ¥å£å¼‚å¸¸ä¿¡æ¯ï¼Œç»“æŸæµä¼ è¾“
    }
  });
  æ•°æ®æµ.pipeTo(new WritableStream({ //å°†å®¢æˆ·ç«¯æ¥æ”¶åˆ°çš„WSæ•°æ®å‘å¾€TCPæ¥å£
    async write(VLæ•°æ®) {
      const ä¼ è¾“æ•°æ® = TCPæ¥å£.writable.getWriter();
      try {
        if (å¯ç”¨å…¨å±€åˆ†æ®µ) {
          await å‘å¾€TCPç›®æ ‡çš„åˆ†å—ä¼ è¾“(ä¼ è¾“æ•°æ®, VLæ•°æ®);
        } else {
          await ä¼ è¾“æ•°æ®.write(VLæ•°æ®);
        }
      } catch {
      } finally {
        ä¼ è¾“æ•°æ®.releaseLock();
      }
    }
  }));
  TCPæ¥å£.readable.pipeTo(new WritableStream({ //å°†TCPæ¥å£è¿”å›çš„æ•°æ®é€šè¿‡WSæ¥å£å‘é€å›å®¢æˆ·ç«¯
    async write(VLæ•°æ®) {
      try {
        if (å¯ç”¨å…¨å±€åˆ†æ®µ) {
          await WSå›ä¼ çš„åˆ†å—ä¼ è¾“(WSæ¥å£, VLæ•°æ®);
        } else {
          await WSæ¥å£.send(VLæ•°æ®);
        }
      } catch {
      }
    },
  }));
  æ£€æŸ¥å¹¶å…³é—­æ¥å£(WSæ¥å£, TCPæ¥å£);
}
async function æ£€æŸ¥å¹¶å…³é—­æ¥å£(WSæ¥å£, TCPæ¥å£) {
  while (true) {
    if (WSæ¥å£.bufferedAmount === 0) {
      TCPæ¥å£.close();
      WSæ¥å£.close(1000);
      break;
    }
    await new Promise(resolve => setTimeout(resolve, 50));
  }
}
async function å‘å¾€TCPç›®æ ‡çš„åˆ†å—ä¼ è¾“(ä¼ è¾“æ•°æ®, VLæ•°æ®, offset = 0) {
  while (offset < VLæ•°æ®.byteLength) {
    const åˆ†æ®µæ•°æ®å— = VLæ•°æ®.slice(offset, offset + åˆ†æ®µå¤§å°);
    await ä¼ è¾“æ•°æ®.write(åˆ†æ®µæ•°æ®å—);
    offset += åˆ†æ®µå¤§å°;
    await new Promise(resolve => setTimeout(resolve, 0));
  }
}
async function WSå›ä¼ çš„åˆ†å—ä¼ è¾“(WSæ¥å£, VLæ•°æ®, offset = 0) {
  while (offset < VLæ•°æ®.byteLength) {
    const åˆ†æ®µæ•°æ®å— = VLæ•°æ®.slice(offset, offset + åˆ†æ®µå¤§å°);
    await WSæ¥å£.send(åˆ†æ®µæ•°æ®å—);
    offset += åˆ†æ®µå¤§å°;
    await new Promise(resolve => setTimeout(resolve, é™é€Ÿç­‰çº§));
  }
}
//////////////////////////////////////////////////////////////////////////SOCKS5éƒ¨åˆ†//////////////////////////////////////////////////////////////////////
async function åˆ›å»ºSOCKS5æ¥å£(è¯†åˆ«åœ°å€ç±»å‹, è®¿é—®åœ°å€, è®¿é—®ç«¯å£) {
  const { username, password, hostname, port } = await è·å–SOCKS5è´¦å·(æˆ‘çš„SOCKS5è´¦å·);
  const SOCKS5æ¥å£ = connect({ hostname, port });
  try {
    await SOCKS5æ¥å£.opened;
  } catch {
    return new Response('SOCKS5æœªè¿é€š', { status: 400 });
  }
  const writer = SOCKS5æ¥å£.writable.getWriter();
  const reader = SOCKS5æ¥å£.readable.getReader();
  const encoder = new TextEncoder();
  const socksGreeting = new Uint8Array([5, 2, 0, 2]); //æ„å»ºè®¤è¯ä¿¡æ¯,æ”¯æŒæ— è®¤è¯å’Œç”¨æˆ·å/å¯†ç è®¤è¯
  await writer.write(socksGreeting);
  let res = (await reader.read()).value;
  if (res[1] === 0x02) { //æ£€æŸ¥æ˜¯å¦éœ€è¦ç”¨æˆ·å/å¯†ç è®¤è¯
    if (!username || !password) {
      return å…³é—­æ¥å£å¹¶é€€å‡º();
    }
    const authRequest = new Uint8Array([ 1, username.length, ...encoder.encode(username), password.length, ...encoder.encode(password) ]); // å‘é€ç”¨æˆ·å/å¯†ç è®¤è¯è¯·æ±‚
    await writer.write(authRequest);
    res = (await reader.read()).value;
    if (res[0] !== 0x01 || res[1] !== 0x00) {
      return å…³é—­æ¥å£å¹¶é€€å‡º(); // è®¤è¯å¤±è´¥
    }
  }
  let è½¬æ¢è®¿é—®åœ°å€;
  switch (è¯†åˆ«åœ°å€ç±»å‹) {
    case 1: // IPv4
      è½¬æ¢è®¿é—®åœ°å€ = new Uint8Array( [1, ...è®¿é—®åœ°å€.split('.').map(Number)] );
      break;
    case 2: // åŸŸå
      è½¬æ¢è®¿é—®åœ°å€ = new Uint8Array( [3, è®¿é—®åœ°å€.length, ...encoder.encode(è®¿é—®åœ°å€)] );
      break;
    case 3: // IPv6
      è½¬æ¢è®¿é—®åœ°å€ = new Uint8Array( [4, ...è®¿é—®åœ°å€.split(':').flatMap(x => [parseInt(x.slice(0, 2), 16), parseInt(x.slice(2), 16)])] );
      break;
    default:
      return å…³é—­æ¥å£å¹¶é€€å‡º();
  }
  const socksRequest = new Uint8Array([ 5, 1, 0, ...è½¬æ¢è®¿é—®åœ°å€, è®¿é—®ç«¯å£ >> 8, è®¿é—®ç«¯å£ & 0xff ]); //å‘é€è½¬æ¢åçš„è®¿é—®åœ°å€/ç«¯å£
  await writer.write(socksRequest);
  res = (await reader.read()).value;
  if (res[0] !== 0x05 || res[1] !== 0x00) {
    return å…³é—­æ¥å£å¹¶é€€å‡º(); // è¿æ¥å¤±è´¥
  }
  writer.releaseLock();
  reader.releaseLock();
  return SOCKS5æ¥å£;
  function å…³é—­æ¥å£å¹¶é€€å‡º() {
    writer.releaseLock();
    reader.releaseLock();
    SOCKS5æ¥å£.close();
    return new Response('SOCKS5æ¡æ‰‹å¤±è´¥', { status: 400 });
  }
}
async function è·å–SOCKS5è´¦å·(SOCKS5) {
  const [latter, former] = SOCKS5.split("@").reverse();
  let username, password, hostname, port;
  if (former) {
    const formers = former.split(":");
    username = formers[0];
    password = formers[1];
  }
  const latters = latter.split(":");
  port = Number(latters.pop());
  hostname = latters.join(":");
  return { username, password, hostname, port };
}
//////////////////////////////////////////////////////////////////////////è®¢é˜…é¡µé¢////////////////////////////////////////////////////////////////////////
let è½¬ç  = 'vl', è½¬ç 2 = 'ess', ç¬¦å· = '://', å°çŒ« = 'cla', å’ª = 'sh', æˆ‘çš„ç§é’¥;
if (ç§é’¥å¼€å…³) {
  æˆ‘çš„ç§é’¥ = `my-key: ${å’¦è¿™æ˜¯æˆ‘çš„ç§é’¥å“}`
} else {
  æˆ‘çš„ç§é’¥ = ""
}
function ç»™æˆ‘è®¢é˜…é¡µé¢(å“å‘€å‘€è¿™æ˜¯æˆ‘çš„IDå•Š, hostName) {
return `
1ã€æœ¬workerçš„ç§é’¥åŠŸèƒ½åªæ”¯æŒ${å°çŒ«}${å’ª}ï¼Œä»…open${å°çŒ«}${å’ª}å’Œ${å°çŒ«}${å’ª} metaæµ‹è¯•è¿‡ï¼Œå…¶ä»–${å°çŒ«}${å’ª}ç±»è½¯ä»¶è‡ªè¡Œæµ‹è¯•
2ã€è‹¥ä½¿ç”¨é€šç”¨è®¢é˜…è¯·å…³é—­ç§é’¥åŠŸèƒ½
3ã€å…¶ä»–éœ€æ±‚è‡ªè¡Œç ”ç©¶
é€šç”¨çš„ï¼šhttps${ç¬¦å·}${hostName}/${å“å‘€å‘€è¿™æ˜¯æˆ‘çš„IDå•Š}/${è½¬ç }${è½¬ç 2}
çŒ«å’ªçš„ï¼šhttps${ç¬¦å·}${hostName}/${å“å‘€å‘€è¿™æ˜¯æˆ‘çš„IDå•Š}/${å°çŒ«}${å’ª}
`;
}
function ç»™æˆ‘é€šç”¨é…ç½®æ–‡ä»¶(hostName) {
if (!æˆ‘çš„ä¼˜é€‰){
  æˆ‘çš„ä¼˜é€‰ = hostName
}
if (!æˆ‘çš„ä¼˜é€‰IPV6){
  æˆ‘çš„ä¼˜é€‰IPV6 = hostName
}
if (!ç‰¹æ®Šä¼˜é€‰çš„host) {
  ç‰¹æ®Šä¼˜é€‰çš„host = hostName
}
const ç‰¹æ®Šé•¿é“¾æ¥Links = btoa(`
${è½¬ç }${è½¬ç 2}${ç¬¦å·}${å“å‘€å‘€è¿™æ˜¯æˆ‘çš„VLå¯†é’¥}@${æˆ‘çš„ä¼˜é€‰}:80?encryption=none&security=none&type=ws&host=${hostName}&path=%2F%3Fed%3D2560
${è½¬ç }${è½¬ç 2}${ç¬¦å·}${å“å‘€å‘€è¿™æ˜¯æˆ‘çš„VLå¯†é’¥}@${æˆ‘çš„ä¼˜é€‰}:8080?encryption=none&security=none&type=ws&host=${hostName}&path=%2F%3Fed%3D2560
${è½¬ç }${è½¬ç 2}${ç¬¦å·}${å“å‘€å‘€è¿™æ˜¯æˆ‘çš„VLå¯†é’¥}@${æˆ‘çš„ä¼˜é€‰}:8880?encryption=none&security=none&type=ws&host=${hostName}&path=%2F%3Fed%3D2560
${è½¬ç }${è½¬ç 2}${ç¬¦å·}${å“å‘€å‘€è¿™æ˜¯æˆ‘çš„VLå¯†é’¥}@${æˆ‘çš„ä¼˜é€‰}:2052?encryption=none&security=none&type=ws&host=${hostName}&path=%2F%3Fed%3D2560
${è½¬ç }${è½¬ç 2}${ç¬¦å·}${å“å‘€å‘€è¿™æ˜¯æˆ‘çš„VLå¯†é’¥}@${æˆ‘çš„ä¼˜é€‰}:2082?encryption=none&security=none&type=ws&host=${hostName}&path=%2F%3Fed%3D2560
${è½¬ç }${è½¬ç 2}${ç¬¦å·}${å“å‘€å‘€è¿™æ˜¯æˆ‘çš„VLå¯†é’¥}@${æˆ‘çš„ä¼˜é€‰}:2086?encryption=none&security=none&type=ws&host=${hostName}&path=%2F%3Fed%3D2560
${è½¬ç }${è½¬ç 2}${ç¬¦å·}${å“å‘€å‘€è¿™æ˜¯æˆ‘çš„VLå¯†é’¥}@${æˆ‘çš„ä¼˜é€‰}:2095?encryption=none&security=none&type=ws&host=${hostName}&path=%2F%3Fed%3D2560
${è½¬ç }${è½¬ç 2}${ç¬¦å·}${å“å‘€å‘€è¿™æ˜¯æˆ‘çš„VLå¯†é’¥}@${æˆ‘çš„ä¼˜é€‰}:443?encryption=none&security=tls&type=ws&host=${hostName}&path=%2F%3Fed%3D2560
${è½¬ç }${è½¬ç 2}${ç¬¦å·}${å“å‘€å‘€è¿™æ˜¯æˆ‘çš„VLå¯†é’¥}@${æˆ‘çš„ä¼˜é€‰}:8443?encryption=none&security=tls&type=ws&host=${hostName}&path=%2F%3Fed%3D2560
${è½¬ç }${è½¬ç 2}${ç¬¦å·}${å“å‘€å‘€è¿™æ˜¯æˆ‘çš„VLå¯†é’¥}@${æˆ‘çš„ä¼˜é€‰}:2053?encryption=none&security=tls&type=ws&host=${hostName}&path=%2F%3Fed%3D2560
${è½¬ç }${è½¬ç 2}${ç¬¦å·}${å“å‘€å‘€è¿™æ˜¯æˆ‘çš„VLå¯†é’¥}@${æˆ‘çš„ä¼˜é€‰}:2083?encryption=none&security=tls&type=ws&host=${hostName}&path=%2F%3Fed%3D2560
${è½¬ç }${è½¬ç 2}${ç¬¦å·}${å“å‘€å‘€è¿™æ˜¯æˆ‘çš„VLå¯†é’¥}@${æˆ‘çš„ä¼˜é€‰}:2087?encryption=none&security=tls&type=ws&host=${hostName}&path=%2F%3Fed%3D2560
${è½¬ç }${è½¬ç 2}${ç¬¦å·}${å“å‘€å‘€è¿™æ˜¯æˆ‘çš„VLå¯†é’¥}@${æˆ‘çš„ä¼˜é€‰}:2096?encryption=none&security=tls&type=ws&host=${hostName}&path=%2F%3Fed%3D2560
${è½¬ç }${è½¬ç 2}${ç¬¦å·}${å“å‘€å‘€è¿™æ˜¯æˆ‘çš„VLå¯†é’¥}@${æˆ‘çš„ä¼˜é€‰IPV6}:80?encryption=none&security=none&type=ws&host=${hostName}&path=%2F%3Fed%3D2560
${è½¬ç }${è½¬ç 2}${ç¬¦å·}${å“å‘€å‘€è¿™æ˜¯æˆ‘çš„VLå¯†é’¥}@${æˆ‘çš„ä¼˜é€‰IPV6}:8080?encryption=none&security=none&type=ws&host=${hostName}&path=%2F%3Fed%3D2560
${è½¬ç }${è½¬ç 2}${ç¬¦å·}${å“å‘€å‘€è¿™æ˜¯æˆ‘çš„VLå¯†é’¥}@${æˆ‘çš„ä¼˜é€‰IPV6}:8880?encryption=none&security=none&type=ws&host=${hostName}&path=%2F%3Fed%3D2560
${è½¬ç }${è½¬ç 2}${ç¬¦å·}${å“å‘€å‘€è¿™æ˜¯æˆ‘çš„VLå¯†é’¥}@${æˆ‘çš„ä¼˜é€‰IPV6}:2052?encryption=none&security=none&type=ws&host=${hostName}&path=%2F%3Fed%3D2560
${è½¬ç }${è½¬ç 2}${ç¬¦å·}${å“å‘€å‘€è¿™æ˜¯æˆ‘çš„VLå¯†é’¥}@${æˆ‘çš„ä¼˜é€‰IPV6}:2082?encryption=none&security=none&type=ws&host=${hostName}&path=%2F%3Fed%3D2560
${è½¬ç }${è½¬ç 2}${ç¬¦å·}${å“å‘€å‘€è¿™æ˜¯æˆ‘çš„VLå¯†é’¥}@${æˆ‘çš„ä¼˜é€‰IPV6}:2086?encryption=none&security=none&type=ws&host=${hostName}&path=%2F%3Fed%3D2560
${è½¬ç }${è½¬ç 2}${ç¬¦å·}${å“å‘€å‘€è¿™æ˜¯æˆ‘çš„VLå¯†é’¥}@${æˆ‘çš„ä¼˜é€‰IPV6}:2095?encryption=none&security=none&type=ws&host=${hostName}&path=%2F%3Fed%3D2560
${è½¬ç }${è½¬ç 2}${ç¬¦å·}${å“å‘€å‘€è¿™æ˜¯æˆ‘çš„VLå¯†é’¥}@${æˆ‘çš„ä¼˜é€‰IPV6}:443?encryption=none&security=tls&type=ws&host=${hostName}&path=%2F%3Fed%3D2560
${è½¬ç }${è½¬ç 2}${ç¬¦å·}${å“å‘€å‘€è¿™æ˜¯æˆ‘çš„VLå¯†é’¥}@${æˆ‘çš„ä¼˜é€‰IPV6}:8443?encryption=none&security=tls&type=ws&host=${hostName}&path=%2F%3Fed%3D2560
${è½¬ç }${è½¬ç 2}${ç¬¦å·}${å“å‘€å‘€è¿™æ˜¯æˆ‘çš„VLå¯†é’¥}@${æˆ‘çš„ä¼˜é€‰IPV6}:2053?encryption=none&security=tls&type=ws&host=${hostName}&path=%2F%3Fed%3D2560
${è½¬ç }${è½¬ç 2}${ç¬¦å·}${å“å‘€å‘€è¿™æ˜¯æˆ‘çš„VLå¯†é’¥}@${æˆ‘çš„ä¼˜é€‰IPV6}:2083?encryption=none&security=tls&type=ws&host=${hostName}&path=%2F%3Fed%3D2560
${è½¬ç }${è½¬ç 2}${ç¬¦å·}${å“å‘€å‘€è¿™æ˜¯æˆ‘çš„VLå¯†é’¥}@${æˆ‘çš„ä¼˜é€‰IPV6}:2087?encryption=none&security=tls&type=ws&host=${hostName}&path=%2F%3Fed%3D2560
${è½¬ç }${è½¬ç 2}${ç¬¦å·}${å“å‘€å‘€è¿™æ˜¯æˆ‘çš„VLå¯†é’¥}@${æˆ‘çš„ä¼˜é€‰IPV6}:2096?encryption=none&security=tls&type=ws&host=${hostName}&path=%2F%3Fed%3D2560
${è½¬ç }${è½¬ç 2}${ç¬¦å·}${å“å‘€å‘€è¿™æ˜¯æˆ‘çš„VLå¯†é’¥}@${ç‰¹æ®Šä¼˜é€‰}:${ç‰¹æ®Šä¼˜é€‰çš„ç«¯å£}?encryption=none&security=tls&type=ws&host=${ç‰¹æ®Šä¼˜é€‰çš„host}&path=%2F%3Fed%3D2560
${è½¬ç }${è½¬ç 2}${ç¬¦å·}${å“å‘€å‘€è¿™æ˜¯æˆ‘çš„VLå¯†é’¥}@${hostName}:443?encryption=none&security=tls&type=ws&host=${hostName}&path=%2F%3Fed%3D2560
`);
if (ç§é’¥å¼€å…³) {
  return `è¯·å…ˆå…³é—­ç§é’¥åŠŸèƒ½`
}else {
  return `${ç‰¹æ®Šé•¿é“¾æ¥Links}`
}
}
function ç»™æˆ‘å°çŒ«å’ªé…ç½®æ–‡ä»¶(hostName) {
if (!æˆ‘çš„ä¼˜é€‰){
  æˆ‘çš„ä¼˜é€‰ = hostName
}
if (!æˆ‘çš„ä¼˜é€‰IPV6){
  æˆ‘çš„ä¼˜é€‰IPV6 = hostName
}
if (!ç‰¹æ®Šä¼˜é€‰çš„host) {
  ç‰¹æ®Šä¼˜é€‰çš„host = hostName
}
return `
dns:
  nameserver:
    - 119.29.29.29
    - 223.5.5.5
  fallback:
    - 8.8.8.8
    - 2001:4860:4860::8888
    - tls://dns.google
proxies:
- name: ${æˆ‘çš„èŠ‚ç‚¹åå­—}-notls-80
  type: ${è½¬ç }${è½¬ç 2}
  server: ${æˆ‘çš„ä¼˜é€‰}
  port: 80
  uuid: ${å“å‘€å‘€è¿™æ˜¯æˆ‘çš„VLå¯†é’¥}
  udp: false
  tls: false
  network: ws
  ws-opts:
    path: "/?ed=2560"
    headers:
      Host: ${hostName}
      ${æˆ‘çš„ç§é’¥}
- name: ${æˆ‘çš„èŠ‚ç‚¹åå­—}-notls-8080
  type: ${è½¬ç }${è½¬ç 2}
  server: ${æˆ‘çš„ä¼˜é€‰}
  port: 8080
  uuid: ${å“å‘€å‘€è¿™æ˜¯æˆ‘çš„VLå¯†é’¥}
  udp: false
  tls: false
  network: ws
  ws-opts:
    path: "/?ed=2560"
    headers:
      Host: ${hostName}
      ${æˆ‘çš„ç§é’¥}
- name: ${æˆ‘çš„èŠ‚ç‚¹åå­—}-notls-8880
  type: ${è½¬ç }${è½¬ç 2}
  server: ${æˆ‘çš„ä¼˜é€‰}
  port: 8880
  uuid: ${å“å‘€å‘€è¿™æ˜¯æˆ‘çš„VLå¯†é’¥}
  udp: false
  tls: false
  network: ws
  ws-opts:
    path: "/?ed=2560"
    headers:
      Host: ${hostName}
      ${æˆ‘çš„ç§é’¥}
- name: ${æˆ‘çš„èŠ‚ç‚¹åå­—}-notls-2052
  type: ${è½¬ç }${è½¬ç 2}
  server: ${æˆ‘çš„ä¼˜é€‰}
  port: 2052
  uuid: ${å“å‘€å‘€è¿™æ˜¯æˆ‘çš„VLå¯†é’¥}
  udp: false
  tls: false
  network: ws
  ws-opts:
    path: "/?ed=2560"
    headers:
      Host: ${hostName}
      ${æˆ‘çš„ç§é’¥}
- name: ${æˆ‘çš„èŠ‚ç‚¹åå­—}-notls-2082
  type: ${è½¬ç }${è½¬ç 2}
  server: ${æˆ‘çš„ä¼˜é€‰}
  port: 2082
  uuid: ${å“å‘€å‘€è¿™æ˜¯æˆ‘çš„VLå¯†é’¥}
  udp: false
  tls: false
  network: ws
  ws-opts:
    path: "/?ed=2560"
    headers:
      Host: ${hostName}
      ${æˆ‘çš„ç§é’¥}
- name: ${æˆ‘çš„èŠ‚ç‚¹åå­—}-notls-2086
  type: ${è½¬ç }${è½¬ç 2}
  server: ${æˆ‘çš„ä¼˜é€‰}
  port: 2086
  uuid: ${å“å‘€å‘€è¿™æ˜¯æˆ‘çš„VLå¯†é’¥}
  udp: false
  tls: false
  network: ws
  ws-opts:
    path: "/?ed=2560"
    headers:
      Host: ${hostName}
      ${æˆ‘çš„ç§é’¥}
- name: ${æˆ‘çš„èŠ‚ç‚¹åå­—}-notls-2095
  type: ${è½¬ç }${è½¬ç 2}
  server: ${æˆ‘çš„ä¼˜é€‰}
  port: 2095
  uuid: ${å“å‘€å‘€è¿™æ˜¯æˆ‘çš„VLå¯†é’¥}
  udp: false
  tls: false
  network: ws
  ws-opts:
    path: "/?ed=2560"
    headers:
      Host: ${hostName}
      ${æˆ‘çš„ç§é’¥}
- name: ${æˆ‘çš„èŠ‚ç‚¹åå­—}-tls-443
  type: ${è½¬ç }${è½¬ç 2}
  server: ${æˆ‘çš„ä¼˜é€‰}
  port: 443
  uuid: ${å“å‘€å‘€è¿™æ˜¯æˆ‘çš„VLå¯†é’¥}
  udp: false
  tls: true
  network: ws
  ws-opts:
    path: "/?ed=2560"
    headers:
      Host: ${hostName}
      ${æˆ‘çš„ç§é’¥}
- name: ${æˆ‘çš„èŠ‚ç‚¹åå­—}-tls-8443
  type: ${è½¬ç }${è½¬ç 2}
  server: ${æˆ‘çš„ä¼˜é€‰}
  port: 8443
  uuid: ${å“å‘€å‘€è¿™æ˜¯æˆ‘çš„VLå¯†é’¥}
  udp: false
  tls: true
  network: ws
  ws-opts:
    path: "/?ed=2560"
    headers:
      Host: ${hostName}
      ${æˆ‘çš„ç§é’¥}
- name: ${æˆ‘çš„èŠ‚ç‚¹åå­—}-tls-2053
  type: ${è½¬ç }${è½¬ç 2}
  server: ${æˆ‘çš„ä¼˜é€‰}
  port: 2053
  uuid: ${å“å‘€å‘€è¿™æ˜¯æˆ‘çš„VLå¯†é’¥}
  udp: false
  tls: true
  network: ws
  ws-opts:
    path: "/?ed=2560"
    headers:
      Host: ${hostName}
      ${æˆ‘çš„ç§é’¥}
- name: ${æˆ‘çš„èŠ‚ç‚¹åå­—}-tls-2083
  type: ${è½¬ç }${è½¬ç 2}
  server: ${æˆ‘çš„ä¼˜é€‰}
  port: 2083
  uuid: ${å“å‘€å‘€è¿™æ˜¯æˆ‘çš„VLå¯†é’¥}
  udp: false
  tls: true
  network: ws
  ws-opts:
    path: "/?ed=2560"
    headers:
      Host: ${hostName}
      ${æˆ‘çš„ç§é’¥}
- name: ${æˆ‘çš„èŠ‚ç‚¹åå­—}-tls-2087
  type: ${è½¬ç }${è½¬ç 2}
  server: ${æˆ‘çš„ä¼˜é€‰}
  port: 2087
  uuid: ${å“å‘€å‘€è¿™æ˜¯æˆ‘çš„VLå¯†é’¥}
  udp: false
  tls: true
  network: ws
  ws-opts:
    path: "/?ed=2560"
    headers:
      Host: ${hostName}
      ${æˆ‘çš„ç§é’¥}
- name: ${æˆ‘çš„èŠ‚ç‚¹åå­—}-tls-2096
  type: ${è½¬ç }${è½¬ç 2}
  server: ${æˆ‘çš„ä¼˜é€‰}
  port: 2096
  uuid: ${å“å‘€å‘€è¿™æ˜¯æˆ‘çš„VLå¯†é’¥}
  udp: false
  tls: true
  network: ws
  ws-opts:
    path: "/?ed=2560"
    headers:
      Host: ${hostName}
      ${æˆ‘çš„ç§é’¥}
- name: ${æˆ‘çš„èŠ‚ç‚¹åå­—}-IPV6-notls-80
  type: ${è½¬ç }${è½¬ç 2}
  server: ${æˆ‘çš„ä¼˜é€‰IPV6}
  port: 80
  ip-version: ipv6 # ip-versionè®¾ç½®ï¼Œå¯ä»¥è‡ªå®šä¹‰å¼ºåˆ¶èµ°ipv4æˆ–ipv6ï¼Œipv6-preferåˆ™æ˜¯åŒæ ˆä¼˜å…ˆèµ°ipv6
  uuid: ${å“å‘€å‘€è¿™æ˜¯æˆ‘çš„VLå¯†é’¥}
  udp: false
  tls: false
  network: ws
  ws-opts:
    path: "/?ed=2560"
    headers:
      Host: ${hostName}
      ${æˆ‘çš„ç§é’¥}
- name: ${æˆ‘çš„èŠ‚ç‚¹åå­—}-IPV6-notls-8080
  type: ${è½¬ç }${è½¬ç 2}
  server: ${æˆ‘çš„ä¼˜é€‰IPV6}
  port: 8080
  ip-version: ipv6 # ip-versionè®¾ç½®ï¼Œå¯ä»¥è‡ªå®šä¹‰å¼ºåˆ¶èµ°ipv4æˆ–ipv6ï¼Œipv6-preferåˆ™æ˜¯åŒæ ˆä¼˜å…ˆèµ°ipv6
  uuid: ${å“å‘€å‘€è¿™æ˜¯æˆ‘çš„VLå¯†é’¥}
  udp: false
  tls: false
  network: ws
  ws-opts:
    path: "/?ed=2560"
    headers:
      Host: ${hostName}
      ${æˆ‘çš„ç§é’¥}
- name: ${æˆ‘çš„èŠ‚ç‚¹åå­—}-IPV6-notls-8880
  type: ${è½¬ç }${è½¬ç 2}
  server: ${æˆ‘çš„ä¼˜é€‰IPV6}
  port: 8880
  ip-version: ipv6 # ip-versionè®¾ç½®ï¼Œå¯ä»¥è‡ªå®šä¹‰å¼ºåˆ¶èµ°ipv4æˆ–ipv6ï¼Œipv6-preferåˆ™æ˜¯åŒæ ˆä¼˜å…ˆèµ°ipv6
  uuid: ${å“å‘€å‘€è¿™æ˜¯æˆ‘çš„VLå¯†é’¥}
  udp: false
  tls: false
  network: ws
  ws-opts:
    path: "/?ed=2560"
    headers:
      Host: ${hostName}
      ${æˆ‘çš„ç§é’¥}
- name: ${æˆ‘çš„èŠ‚ç‚¹åå­—}-IPV6-notls-2052
  type: ${è½¬ç }${è½¬ç 2}
  server: ${æˆ‘çš„ä¼˜é€‰IPV6}
  port: 2052
  ip-version: ipv6 # ip-versionè®¾ç½®ï¼Œå¯ä»¥è‡ªå®šä¹‰å¼ºåˆ¶èµ°ipv4æˆ–ipv6ï¼Œipv6-preferåˆ™æ˜¯åŒæ ˆä¼˜å…ˆèµ°ipv6
  uuid: ${å“å‘€å‘€è¿™æ˜¯æˆ‘çš„VLå¯†é’¥}
  udp: false
  tls: false
  network: ws
  ws-opts:
    path: "/?ed=2560"
    headers:
      Host: ${hostName}
      ${æˆ‘çš„ç§é’¥}
- name: ${æˆ‘çš„èŠ‚ç‚¹åå­—}-IPV6-notls-2082
  type: ${è½¬ç }${è½¬ç 2}
  server: ${æˆ‘çš„ä¼˜é€‰IPV6}
  port: 2082
  ip-version: ipv6 # ip-versionè®¾ç½®ï¼Œå¯ä»¥è‡ªå®šä¹‰å¼ºåˆ¶èµ°ipv4æˆ–ipv6ï¼Œipv6-preferåˆ™æ˜¯åŒæ ˆä¼˜å…ˆèµ°ipv6
  uuid: ${å“å‘€å‘€è¿™æ˜¯æˆ‘çš„VLå¯†é’¥}
  udp: false
  tls: false
  network: ws
  ws-opts:
    path: "/?ed=2560"
    headers:
      Host: ${hostName}
      ${æˆ‘çš„ç§é’¥}
- name: ${æˆ‘çš„èŠ‚ç‚¹åå­—}-IPV6-notls-2086
  type: ${è½¬ç }${è½¬ç 2}
  server: ${æˆ‘çš„ä¼˜é€‰IPV6}
  port: 2086
  ip-version: ipv6 # ip-versionè®¾ç½®ï¼Œå¯ä»¥è‡ªå®šä¹‰å¼ºåˆ¶èµ°ipv4æˆ–ipv6ï¼Œipv6-preferåˆ™æ˜¯åŒæ ˆä¼˜å…ˆèµ°ipv6
  uuid: ${å“å‘€å‘€è¿™æ˜¯æˆ‘çš„VLå¯†é’¥}
  udp: false
  tls: false
  network: ws
  ws-opts:
    path: "/?ed=2560"
    headers:
      Host: ${hostName}
      ${æˆ‘çš„ç§é’¥}
- name: ${æˆ‘çš„èŠ‚ç‚¹åå­—}-IPV6-notls-2095
  type: ${è½¬ç }${è½¬ç 2}
  server: ${æˆ‘çš„ä¼˜é€‰IPV6}
  port: 2095
  ip-version: ipv6 # ip-versionè®¾ç½®ï¼Œå¯ä»¥è‡ªå®šä¹‰å¼ºåˆ¶èµ°ipv4æˆ–ipv6ï¼Œipv6-preferåˆ™æ˜¯åŒæ ˆä¼˜å…ˆèµ°ipv6
  uuid: ${å“å‘€å‘€è¿™æ˜¯æˆ‘çš„VLå¯†é’¥}
  udp: false
  tls: false
  network: ws
  ws-opts:
    path: "/?ed=2560"
    headers:
      Host: ${hostName}
      ${æˆ‘çš„ç§é’¥}
- name: ${æˆ‘çš„èŠ‚ç‚¹åå­—}-IPV6-tls-443
  type: ${è½¬ç }${è½¬ç 2}
  server: ${æˆ‘çš„ä¼˜é€‰IPV6}
  port: 443
  ip-version: ipv6 # ip-versionè®¾ç½®ï¼Œå¯ä»¥è‡ªå®šä¹‰å¼ºåˆ¶èµ°ipv4æˆ–ipv6ï¼Œipv6-preferåˆ™æ˜¯åŒæ ˆä¼˜å…ˆèµ°ipv6
  uuid: ${å“å‘€å‘€è¿™æ˜¯æˆ‘çš„VLå¯†é’¥}
  udp: false
  tls: true
  network: ws
  ws-opts:
    path: "/?ed=2560"
    headers:
      Host: ${hostName}
      ${æˆ‘çš„ç§é’¥}
- name: ${æˆ‘çš„èŠ‚ç‚¹åå­—}-IPV6-tls-8443
  type: ${è½¬ç }${è½¬ç 2}
  server: ${æˆ‘çš„ä¼˜é€‰IPV6}
  port: 8443
  ip-version: ipv6 # ip-versionè®¾ç½®ï¼Œå¯ä»¥è‡ªå®šä¹‰å¼ºåˆ¶èµ°ipv4æˆ–ipv6ï¼Œipv6-preferåˆ™æ˜¯åŒæ ˆä¼˜å…ˆèµ°ipv6
  uuid: ${å“å‘€å‘€è¿™æ˜¯æˆ‘çš„VLå¯†é’¥}
  udp: false
  tls: true
  network: ws
  ws-opts:
    path: "/?ed=2560"
    headers:
      Host: ${hostName}
      ${æˆ‘çš„ç§é’¥}
- name: ${æˆ‘çš„èŠ‚ç‚¹åå­—}-IPV6-tls-2053
  type: ${è½¬ç }${è½¬ç 2}
  server: ${æˆ‘çš„ä¼˜é€‰IPV6}
  port: 2053
  ip-version: ipv6 # ip-versionè®¾ç½®ï¼Œå¯ä»¥è‡ªå®šä¹‰å¼ºåˆ¶èµ°ipv4æˆ–ipv6ï¼Œipv6-preferåˆ™æ˜¯åŒæ ˆä¼˜å…ˆèµ°ipv6
  uuid: ${å“å‘€å‘€è¿™æ˜¯æˆ‘çš„VLå¯†é’¥}
  udp: false
  tls: true
  network: ws
  ws-opts:
    path: "/?ed=2560"
    headers:
      Host: ${hostName}
      ${æˆ‘çš„ç§é’¥}
- name: ${æˆ‘çš„èŠ‚ç‚¹åå­—}-IPV6-tls-2083
  type: ${è½¬ç }${è½¬ç 2}
  server: ${æˆ‘çš„ä¼˜é€‰IPV6}
  port: 2083
  ip-version: ipv6 # ip-versionè®¾ç½®ï¼Œå¯ä»¥è‡ªå®šä¹‰å¼ºåˆ¶èµ°ipv4æˆ–ipv6ï¼Œipv6-preferåˆ™æ˜¯åŒæ ˆä¼˜å…ˆèµ°ipv6
  uuid: ${å“å‘€å‘€è¿™æ˜¯æˆ‘çš„VLå¯†é’¥}
  udp: false
  tls: true
  network: ws
  ws-opts:
    path: "/?ed=2560"
    headers:
      Host: ${hostName}
      ${æˆ‘çš„ç§é’¥}
- name: ${æˆ‘çš„èŠ‚ç‚¹åå­—}-IPV6-tls-2087
  type: ${è½¬ç }${è½¬ç 2}
  server: ${æˆ‘çš„ä¼˜é€‰IPV6}
  port: 2087
  ip-version: ipv6 # ip-versionè®¾ç½®ï¼Œå¯ä»¥è‡ªå®šä¹‰å¼ºåˆ¶èµ°ipv4æˆ–ipv6ï¼Œipv6-preferåˆ™æ˜¯åŒæ ˆä¼˜å…ˆèµ°ipv6
  uuid: ${å“å‘€å‘€è¿™æ˜¯æˆ‘çš„VLå¯†é’¥}
  udp: false
  tls: true
  network: ws
  ws-opts:
    path: "/?ed=2560"
    headers:
      Host: ${hostName}
      ${æˆ‘çš„ç§é’¥}
- name: ${æˆ‘çš„èŠ‚ç‚¹åå­—}-IPV6-tls-2096
  type: ${è½¬ç }${è½¬ç 2}
  server: ${æˆ‘çš„ä¼˜é€‰IPV6}
  port: 2096
  ip-version: ipv6 # ip-versionè®¾ç½®ï¼Œå¯ä»¥è‡ªå®šä¹‰å¼ºåˆ¶èµ°ipv4æˆ–ipv6ï¼Œipv6-preferåˆ™æ˜¯åŒæ ˆä¼˜å…ˆèµ°ipv6
  uuid: ${å“å‘€å‘€è¿™æ˜¯æˆ‘çš„VLå¯†é’¥}
  udp: false
  tls: true
  network: ws
  ws-opts:
    path: "/?ed=2560"
    headers:
      Host: ${hostName}
      ${æˆ‘çš„ç§é’¥}
- name: ${æˆ‘çš„èŠ‚ç‚¹åå­—}-éCFèŠ‚ç‚¹
  type: ${è½¬ç }${è½¬ç 2}
  server: ${ç‰¹æ®Šä¼˜é€‰}
  port: ${ç‰¹æ®Šä¼˜é€‰çš„ç«¯å£}
  uuid: ${å“å‘€å‘€è¿™æ˜¯æˆ‘çš„VLå¯†é’¥}
  udp: false
  tls: ${éCFèŠ‚ç‚¹æ˜¯å¦æ‰“å¼€tls}
  network: ws
  ws-opts:
    path: "/?ed=2560"
    headers:
      Host: ${ç‰¹æ®Šä¼˜é€‰çš„host}
      ${æˆ‘çš„ç§é’¥}
- name: ${æˆ‘çš„èŠ‚ç‚¹åå­—}-å¤‡ç”¨IPV4èŠ‚ç‚¹
  type: ${è½¬ç }${è½¬ç 2}
  server: ${hostName}
  port: 443
  uuid: ${å“å‘€å‘€è¿™æ˜¯æˆ‘çš„VLå¯†é’¥}
  udp: false
  tls: true
  network: ws
  ws-opts:
    path: "/?ed=2560"
    headers:
      Host: ${hostName}
      ${æˆ‘çš„ç§é’¥}
- name: ${æˆ‘çš„èŠ‚ç‚¹åå­—}-å¤‡ç”¨IPV6èŠ‚ç‚¹
  type: ${è½¬ç }${è½¬ç 2}
  server: ${hostName}
  port: 443
  ip-version: ipv6-prefer  # ip-versionè®¾ç½®ï¼Œå¯ä»¥è‡ªå®šä¹‰å¼ºåˆ¶èµ°ipv4æˆ–ipv6ï¼Œipv6-preferåˆ™æ˜¯åŒæ ˆä¼˜å…ˆèµ°ipv6
  uuid: ${å“å‘€å‘€è¿™æ˜¯æˆ‘çš„VLå¯†é’¥}
  udp: false
  tls: true
  network: ws
  ws-opts:
    path: "/?ed=2560"
    headers:
      Host: ${hostName}
      ${æˆ‘çš„ç§é’¥}
proxy-groups:
- name: ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  type: select
  proxies:
    - notlsè´Ÿè½½å‡è¡¡
    - tlsè´Ÿè½½å‡è¡¡
    - IPV6-notlsè´Ÿè½½å‡è¡¡
    - IPV6-tlsè´Ÿè½½å‡è¡¡
    - è‡ªåŠ¨é€‰æ‹©
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-notls-80
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-notls-8080
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-notls-8880
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-notls-2052
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-notls-2082
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-notls-2086
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-notls-2095
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-tls-443
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-tls-8443
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-tls-2053
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-tls-2083
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-tls-2087
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-tls-2096
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-IPV6-notls-80
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-IPV6-notls-8080
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-IPV6-notls-8880
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-IPV6-notls-2052
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-IPV6-notls-2082
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-IPV6-notls-2086
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-IPV6-notls-2095
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-IPV6-tls-443
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-IPV6-tls-8443
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-IPV6-tls-2053
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-IPV6-tls-2083
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-IPV6-tls-2087
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-IPV6-tls-2096
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-éCFèŠ‚ç‚¹
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-å¤‡ç”¨IPV4èŠ‚ç‚¹
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-å¤‡ç”¨IPV6èŠ‚ç‚¹
- name: è‡ªåŠ¨é€‰æ‹©
  type: url-test
  url: http://www.gstatic.com/generate_204
  interval: 300
  tolerance: 50
  proxies:
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-notls-80
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-notls-8080
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-notls-8880
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-notls-2052
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-notls-2082
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-notls-2086
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-notls-2095
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-tls-443
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-tls-8443
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-tls-2053
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-tls-2083
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-tls-2087
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-tls-2096
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-IPV6-notls-80
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-IPV6-notls-8080
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-IPV6-notls-8880
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-IPV6-notls-2052
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-IPV6-notls-2082
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-IPV6-notls-2086
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-IPV6-notls-2095
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-IPV6-tls-443
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-IPV6-tls-8443
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-IPV6-tls-2053
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-IPV6-tls-2083
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-IPV6-tls-2087
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-IPV6-tls-2096
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-éCFèŠ‚ç‚¹
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-å¤‡ç”¨IPV4èŠ‚ç‚¹
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-å¤‡ç”¨IPV6èŠ‚ç‚¹
- name: notlsè´Ÿè½½å‡è¡¡
  type: load-balance
  url: http://www.gstatic.com/generate_204
  interval: 300
  proxies:
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-notls-80
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-notls-8080
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-notls-8880
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-notls-2052
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-notls-2082
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-notls-2086
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-notls-2095
- name: tlsè´Ÿè½½å‡è¡¡
  type: load-balance
  url: http://www.gstatic.com/generate_204
  interval: 300
  proxies:
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-tls-443
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-tls-8443
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-tls-2053
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-tls-2083
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-tls-2087
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-tls-2096
- name: IPV6-notlsè´Ÿè½½å‡è¡¡
  type: load-balance
  url: http://www.gstatic.com/generate_204
  interval: 300
  proxies:
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-IPV6-notls-80
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-IPV6-notls-8080
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-IPV6-notls-8880
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-IPV6-notls-2052
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-IPV6-notls-2082
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-IPV6-notls-2086
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-IPV6-notls-2095
- name: IPV6-tlsè´Ÿè½½å‡è¡¡
  type: load-balance
  url: http://www.gstatic.com/generate_204
  interval: 300
  proxies:
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-IPV6-tls-443
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-IPV6-tls-8443
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-IPV6-tls-2053
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-IPV6-tls-2083
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-IPV6-tls-2087
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-IPV6-tls-2096
- name: éCFèŠ‚ç‚¹
  type: select
  proxies:
    - ${æˆ‘çš„èŠ‚ç‚¹åå­—}-éCFèŠ‚ç‚¹
- name: æ¼ç½‘ä¹‹é±¼
  type: select
  proxies:
    - DIRECT
    - ğŸš€ èŠ‚ç‚¹é€‰æ‹©
    - éCFèŠ‚ç‚¹
rules:
# ç­–ç•¥è§„åˆ™ï¼Œéƒ¨åˆ†è§„åˆ™éœ€æ‰“å¼€${å°çŒ«}${å’ª} mateçš„ä½¿ç”¨geoip datç‰ˆæ•°æ®åº“ï¼Œæ¯”å¦‚TGè§„åˆ™å°±éœ€è¦ï¼Œæˆ–è€…è‡ªå®šä¹‰geoipçš„è§„åˆ™è®¢é˜…
# è¿™æ˜¯geoipçš„è§„åˆ™è®¢é˜…é“¾æ¥ï¼Œhttps://cdn.jsdelivr.net/gh/Loyalsoldier/geoip@release/Country.mmdb
# GPTè§„åˆ™
- DOMAIN-KEYWORD,openai,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
- DOMAIN-SUFFIX,AI.com,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
- DOMAIN-SUFFIX,cdn.auth0.com,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
- DOMAIN-SUFFIX,openaiapi-site.azureedge.net,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
- DOMAIN-SUFFIX,opendns.com,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
- DOMAIN-SUFFIX,bing.com,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
- DOMAIN-SUFFIX,civitai.com,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
- DOMAIN,bard.google.com,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
- DOMAIN,ai.google.dev,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
- DOMAIN,gemini.google.com,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
- DOMAIN-SUFFIX,googleapis.com,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
- DOMAIN-SUFFIX,sentry.io,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
- DOMAIN-SUFFIX,intercom.io,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
- DOMAIN-SUFFIX,featuregates.org,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
- DOMAIN-SUFFIX,statsigapi.net,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
- DOMAIN-SUFFIX,claude.ai,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
- DOMAIN-SUFFIX,Anthropic.com,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
- DOMAIN-SUFFIX,opera-api.com,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
- DOMAIN-SUFFIX,aistudio.google.com,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
- DOMAIN-SUFFIX,auth0.com,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
- DOMAIN-SUFFIX,challenges.cloudflare.com,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
- DOMAIN-SUFFIX,chatgpt.com,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
- DOMAIN-SUFFIX,client-api.arkoselabs.com,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
- DOMAIN-SUFFIX,events.statsigapi.net,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
- DOMAIN-SUFFIX,identrust.com,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
- DOMAIN-SUFFIX,intercomcdn.com,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
- DOMAIN-SUFFIX,oaistatic.com,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
- DOMAIN-SUFFIX,oaiusercontent.com,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
- DOMAIN-SUFFIX,openai.com,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
- DOMAIN-SUFFIX,stripe.com,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
# GPTè§„åˆ™
# - GEOSITE,category-ads,REJECT #ç®€å•å¹¿å‘Šè¿‡æ»¤è§„åˆ™ï¼Œè¦å¢åŠ è§„åˆ™æ•°å¯ä½¿ç”¨category-ads-all
- GEOSITE,cn,DIRECT #å›½å†…åŸŸåç›´è¿è§„åˆ™
- GEOIP,CN,DIRECT,no-resolve #å›½å†…IPç›´è¿è§„åˆ™
- GEOSITE,cloudflare,DIRECT #CFåŸŸåç›´è¿è§„åˆ™
- GEOIP,CLOUDFLARE,DIRECT,no-resolve #CFIPç›´è¿è§„åˆ™
- GEOSITE,gfw,ğŸš€ èŠ‚ç‚¹é€‰æ‹© #GFWåŸŸåè§„åˆ™
- GEOSITE,google,ğŸš€ èŠ‚ç‚¹é€‰æ‹© #GOOGLEåŸŸåè§„åˆ™
- GEOIP,GOOGLE,ğŸš€ èŠ‚ç‚¹é€‰æ‹©,no-resolve #GOOGLE IPè§„åˆ™
- GEOSITE,netflix,ğŸš€ èŠ‚ç‚¹é€‰æ‹© #å¥ˆé£åŸŸåè§„åˆ™
- GEOIP,NETFLIX,ğŸš€ èŠ‚ç‚¹é€‰æ‹©,no-resolve #å¥ˆé£IPè§„åˆ™
- GEOSITE,telegram,ğŸš€ èŠ‚ç‚¹é€‰æ‹© #TGåŸŸåè§„åˆ™
- GEOIP,TELEGRAM,ğŸš€ èŠ‚ç‚¹é€‰æ‹©,no-resolve #TG IPè§„åˆ™
- MATCH,æ¼ç½‘ä¹‹é±¼
`
}
